package main

import (
	. "fmt"
	"math"
)

func main() {
	Println("========================")
	Println("Задача 10.01.")
	Println("========================")
	task1001()
	Println("========================")
	Println("Задача 10.02.")
	Println("========================")
	task1002()
}
func task1001() {
	/*
	   Задание 1: Разложение ex в ряд Тейлора

	   Что нужно сделать
	   Написать программу, вычисляющую ex посредством разложения в ряд Тейлора, с заданной пользователем точностью.
	   Ряд Тейлора для ex:
	   пользователь вводит значение x и с точностью до какого знака после запятой необходимо вычислить значение функции.

	   Советы и рекомендации
	   Получить значение точности (эпсилон) можно рассчитать, разделив 1 на 10 возведенную в степень равную количеству знаков после запятой.

	   Что оценивается
	   для x = 0 и n = 1 вывод должен быть 1
	   для x = 1 и n = 3 вывод должен быть 2.7182539682539684
	   для x = 1 и n = 5 вывод должен быть 2.7182815255731922

	   https://newman.livejournal.com/168590.html
	   https://www.cyberforum.ru/cpp-beginners/thread1395848.html
	*/
	var facti, res float64
	var x, n int
	Print("Введите x: ")
	_, _ = Scan(&x)
	Print("Введите n: ")
	_, _ = Scan(&n)
	//x = 1
	//n = 3
	eps := 1 / math.Pow(10, float64(n))

	var i, OldRes float64
	for {
		i++
		facti = 1 // получаем факториал i
		for ii := 1.0; ii < i; ii++ {
			facti = facti + facti*ii
		}
		xi := math.Pow(float64(x), i) //получаем x в степени i
		OldRes = res
		res += xi / (facti)

		//fmt.Println("x =", x, "i =", i, "xi =", xi, "facti =", facti, "res =", res)
		if res-OldRes < eps {
			break
		}
	}

	Println("result = ", res)
}

func task1002() {
	/*
			Что нужно сделать

			В связи с особенностями хранения дробных чисел, они не очень подходят для хранения денежных значений (может потеряться значимая часть при переполнении,
			да и дробная часть больше двух знаков не нужна). Но мы с вами попробуем решить задачу начисления процентов используя именно их.
			Пусть пользователь вводит сумму которую он кладет в банк, ежемесячный процент капитализации и количество лет на которое делается вклад.
			Необходимо помесячно пересчитывать сумму округляя ее до целого количества копеек вниз.
			Например, если после начисления процентов остаток включает 35,78 копеек, то оставляем только 35 копеек, а дробную часть отбрасываем.
			По окончании работы программы необходимо вывести какую сумму получит вкладчик на руки и какая сумма будет зачислена в пользу банка за счет округления копеек.

			Советы и рекомендации
			Для округления копеек, можно умножить получившееся после капитализации процентов число на 100, округлить вниз и опять поделить на 100,
			отбрасываемую часть можно получить вычитанием текущего значения остатка на счете и того, который был до округления.

			Что оценивается
		    Для 1000 рублей, 1% и 1 года программа должна вывести 1126,78 и 0.04350000000022192 (возможно меньше знаков)
		    Для 1000 рублей, 1% и 10 лет программа должна вывести 3299.41 и 0.5216000000013992 (возможно меньше знаков)
	*/

	var roundingAmount, contribution, percent float64
	var years int

	Print("Введите сумму вклада: ")
	_, _ = Scan(&contribution)
	Print("Введите количество лет: ")
	_, _ = Scan(&years)
	Print("Введите процент: ")
	_, _ = Scan(&percent)

	roundingAmount = 0

	for i := 1; i <= years*12; i++ {
		fullContribution := contribution + contribution*percent/100
		contribution = math.Trunc(fullContribution*100) / 100
		roundingAmount += fullContribution - contribution
	}

	Println("Сумма:", contribution, " Сумма банка:", roundingAmount)
}
